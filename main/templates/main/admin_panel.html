{% extends "main/base.html" %}
{% block title %}–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å{% endblock title %}

{% block content %}
<div class="container mt-4">
  <h2>üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>

  <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
  <form method="post" class="mb-4 border p-3 rounded bg-light">
    {% csrf_token %}
    <h5>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h5>
    {{ form.as_p }}
    <div class="col">
      <button type="submit" class="btn btn-success w-100 mt-4">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>


    {% include "main/messages.html" %}
  </form>

  <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>–ò–º—è</th>
        <th>–†–æ–ª—å</th>
        <th>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</th>
        <th>–°–º–µ–Ω–∏–ª –ø–∞—Ä–æ–ª—å</th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr>
        <td>{{ user.name }}</td>
        <td>{{ user.role.name }}</td>
        <td>{{ user.is_blocked|yesno:"–î–∞,–ù–µ—Ç" }}</td>
        <td>{{ user.is_password_changed|yesno:"–î–∞,–ù–µ—Ç" }}</td>
        <td class="d-flex gap-1">
          {% if user.is_blocked %}
            <a href="{% url 'unblock_user' user.id %}" class="btn btn-warning btn-sm">–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</a>
          {% endif %}
          <a href="{% url 'edit_user' user.id %}" class="btn btn-primary btn-sm">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
          <a href="{% url 'delete_user' user.id %}" class="btn btn-danger btn-sm" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ user.name }}?')">–£–¥–∞–ª–∏—Ç—å</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock content %}
